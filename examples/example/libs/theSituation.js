function checkResting(t,e){for(var n in e.data.keys){if(t===e.data.keys[n].key){for(var a in e.keysDown)if(e.keysDown[a]===t&&(e.keysDown.splice(a,1),e.keysDown.length>0)){var o=e.keysDown[e.keysDown.length-1];for(var i in e.data.keys)i.key===o&&e.mc.gotoAndStop(release)}e.mc.gotoAndStop(0)}}}theSituation={},theSituation.clickNext=function(t,e){for(var n=0;n<e.length;n++){var a=e[n];"NEXT_FRAME"===a.data.click&&window.addEventListener("mousedown",function(t){a.mc.gotoAndStop(a.mc.currentFrame+1)})}},theSituation.actionKeys=function(t,e){for(var n=0;n<e.length;n++)e[n].keysDown=[];window.addEventListener("keydown",function(t){for(var n=t.key,a=0;a<e.length;a++)if(e[a].data.keys)for(var o in actor=e[a],actor.data.keys){var i=actor.data.keys[o];if(n===i.key){for(var r in actor.keysDown)actor.keysDown[r]===i.key&&(keysDown=actor.keysDown.splice(r,1));actor.keysDown.push(i.key),actor.mc.gotoAndStop(i.frame)}}}),window.addEventListener("keyup",function(t){for(var n=0;n<e.length;n++)e[n].data.hasRestingState&&checkResting(t.key,e[n])})},theSituation.castActors=function(t,e){for(var n=[],a=0;a<e.length;a++){var o={};o.data=e[a],o.mc=t[o.data.name],n.push(o)}return n};var inited=!1;function situationInit(t,e,n){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);inited||(inited=!0,n(t))}else 404==this.status&&(inited="error",alert("Did you not pass in a url I can === actually === use?"))},a.open("GET",e,!0),a.send()}theSituation.processTheSituation=function(t,e,n){t?e?n?inited||situationInit(t,e,n):alert("Did you forget to pass in theSituation?  Did you not read the â–³?  Do you not trust me?"):alert(":)"):alert("You didn't pass in root and it makes me very upset.")};