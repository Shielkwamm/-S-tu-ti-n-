function checkResting(t,e){for(var n in e.data.keys){if(t===e.data.keys[n].key){for(var o in e.keysDown)if(e.keysDown[o]===t&&(e.keysDown.splice(o,1),e.keysDown.length>0)){var a=e.keysDown[e.keysDown.length-1];for(var i in e.data.keys)i.key===a&&e.mc.gotoAndStop(release)}e.mc.gotoAndStop(0)}}}function situationInit(t,e,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);theSituation.inited||(theSituation.inited=!0,n(t))}else 404==this.status&&(theSituation.inited="error",alert("Did you not pass in a url I can === actually === use?"))},o.open("GET",e,!0),o.send()}theSituation={},theSituation.clickNext=function(t,e){for(var n=0;n<e.length;n++){var o=e[n];"NEXT_FRAME"===o.data.click&&window.addEventListener("mousedown",function(t){o.mc.gotoAndStop(o.mc.currentFrame+1)})}},theSituation.castActors=function(t,e){for(var n=[],o=0;o<e.length;o++){var a={};a.data=e[o],a.mc=t[a.data.name],n.push(a)}return n},theSituation.actionKeys=function(t,e){for(var n=0;n<e.length;n++)e[n].keysDown=[];window.addEventListener("keydown",function(t){for(var n=t.key,o=0;o<e.length;o++)if(e[o].data.keys)for(var a in actor=e[o],actor.data.keys){var i=actor.data.keys[a];if(n===i.key){for(var r in actor.keysDown)actor.keysDown[r]===i.key&&(keysDown=actor.keysDown.splice(r,1));actor.keysDown.push(i.key),actor.mc.gotoAndStop(i.frame)}}}),window.addEventListener("keyup",function(t){for(var n=0;n<e.length;n++)e[n].data.hasRestingState&&checkResting(t.key,e[n])})},theSituation.inited=!1,theSituation.processTheSituation=function(t,e,n){t?e?n?theSituation.inited||situationInit(t,e,n):alert("Did you forget to pass in theSituation?  Did you not read the â–³?  Do you not trust me?"):alert(":)"):alert("You didn't pass in root and it makes me very upset.")};